<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>TSN Simulation - NeSTiNg | Deepsea52418</title><meta name="keywords" content="TSN"><meta name="author" content="Deepsea52418"><meta name="copyright" content="Deepsea52418"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="一、简介TSN（Time-Sensitive Networking）时间敏感网络，即在非确定性的以太网中实现确定性的最小时间延时的协议族，是IEEE 802.1工作组中的TSN工作组开发的一套协议标准。其定义了以太网数据传输的时间敏感机制，为标准以太网增加了确定性和可靠性，以确保数据实时、确定和可靠地传输。  OMNeT++(Objective Modular Network TestBed in">
<meta property="og:type" content="article">
<meta property="og:title" content="TSN Simulation - NeSTiNg">
<meta property="og:url" content="https://deepsea52418.github.io/TSN-Simulation-NeSTiNg/">
<meta property="og:site_name" content="Deepsea52418">
<meta property="og:description" content="一、简介TSN（Time-Sensitive Networking）时间敏感网络，即在非确定性的以太网中实现确定性的最小时间延时的协议族，是IEEE 802.1工作组中的TSN工作组开发的一套协议标准。其定义了以太网数据传输的时间敏感机制，为标准以太网增加了确定性和可靠性，以确保数据实时、确定和可靠地传输。  OMNeT++(Objective Modular Network TestBed in">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2022-11-11T16:00:00.000Z">
<meta property="article:modified_time" content="2022-11-18T14:04:47.029Z">
<meta property="article:author" content="Deepsea52418">
<meta property="article:tag" content="TSN">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://deepsea52418.github.io/TSN-Simulation-NeSTiNg/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'TSN Simulation - NeSTiNg',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-18 22:04:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/Blog/202211152204715.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Deepsea52418</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">TSN Simulation - NeSTiNg</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-11-11T16:00:00.000Z" title="发表于 2022-11-12 00:00:00">2022-11-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-11-18T14:04:47.029Z" title="更新于 2022-11-18 22:04:47">2022-11-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="TSN Simulation - NeSTiNg"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、简介"><a href="#一、简介" class="headerlink" title="一、简介"></a>一、简介</h1><p>TSN（Time-Sensitive Networking）时间敏感网络，即在非确定性的以太网中实现确定性的最小时间延时的协议族，是IEEE 802.1工作组中的TSN工作组开发的一套协议标准。其定义了以太网数据传输的时间敏感机制，为标准以太网增加了确定性和可靠性，以确保数据实时、确定和可靠地传输。 </p>
<p>OMNeT++(Objective Modular Network TestBed in C++) 是基于 Eclipse 开发的开源的基于组件的模块化的开放网络仿真平台，是近年来在科学和工业领域里逐渐流行的一种优秀的网络仿真平台。其作为离散事件仿真器，具备强大完善的图形界面接口和可嵌入式仿真内核，同NS2等仿真平台相比，OMNeT++可运行于多个操作系统平台，可以简便定义网络拓扑结构，具备编程，调试和跟踪支持等功能。 </p>
<p>目前，OMNeT++中常用的TSN仿真库如下：</p>
<table>
  <tr>
    <td> </td>
    <td><center>依赖</center></td>
    <td><center>制作团队</center></td>
    <td><center>最近维护时间</center></td>
    <td><center>实现功能</center></td>
    <td><center>特点</center></td>
    <td><center>结论</center></td>  
  </tr>
  <tr>
    <td><center><a target="_blank" rel="noopener" href="https://github.com/inet-framework/inet">INET 4.4</a></center></td>
    <td><center>OMNeT++ 6.0</center></td>
    <td><center>OMNeT++</center></td>
    <td><center>2022年</center></td>  
    <td><center>Q AS Qbv Qcr Qbu Qci CB等</center></td>
    <td><center>在INET框架中集成了TSN的功能，同时按照网络协议分层实现</center></td> 
    <td><center>如果现在学习TSN仿真，建议直接看INET 4.4，其文档完善，并且好像是CORE4INET团队制作的</center></td> 
  </tr>
  <tr>
    <td><center><a target="_blank" rel="noopener" href="https://github.com/CoRE-RG/CoRE4INE">CoRE4INET</a></center></td>
    <td><center>OMNeT++ 5.5.1 、INET 3.6.6</center></td>
    <td><center>University of Hamburg</center></td>
    <td><center>2016年</center></td>  
    <td><center>Q AS Qbv AS6802 AVB等</center></td>
    <td><center>功能最完善的，同时提供多种更进一步的拓展，以实现如TSSDN相关仿真</center></td> 
    <td><center>如果需要进行车载网络相关仿真，或者需要TSSDN相关仿真，可以看看。</center></td> 
  </tr>
  <tr>
    <td><center><a target="_blank" rel="noopener" href="https://gitlab.com/ipvs/nesting">NeSTiNg</a></center></td>
    <td><center>OMNeT++ 5.5.1 、INET 4.1.2</center></td>
    <td><center>University of Stuttgart</center></td>
    <td><center>2020年</center></td>
    <td><center>Q Qbv Qbu</center></td>
    <td><center>功能相对简单，容易理解</center></td> 
    <td><center>结构相对简单易理解，可以用作TSN仿真入门理解</center></td> 
  </tr>
</table>


<p><strong>注意：本文主体是在2022年4月完成的，当时 NeSTiNg 还是不错的选择，但是今年6月推出的 INET 4.4 ，其功能完善并且文档齐全，更推荐直接学习 <font color=red>INET 4.4</font></strong></p>
<h1 id="二、搭建仿真环境"><a href="#二、搭建仿真环境" class="headerlink" title="二、搭建仿真环境"></a>二、搭建仿真环境</h1><h2 id="2-1-仿真环境"><a href="#2-1-仿真环境" class="headerlink" title="2.1 仿真环境"></a>2.1 仿真环境</h2><p>本文采用的仿真环境为：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">版本</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Ubuntu</td>
<td align="center">18.04</td>
<td align="center">仿真平台操作系统</td>
</tr>
<tr>
<td align="center">OMNeT++</td>
<td align="center">5.5.1</td>
<td align="center">仿真平台</td>
</tr>
<tr>
<td align="center">INET Framework</td>
<td align="center">4.1.2</td>
<td align="center">提供多种网络协议仿真</td>
</tr>
<tr>
<td align="center">NeSTiNg</td>
<td align="center">&#x2F;</td>
<td align="center">提供多种TSN模型</td>
</tr>
</tbody></table>
<h2 id="2-2-编译安装"><a href="#2-2-编译安装" class="headerlink" title="2.2 编译安装"></a>2.2 编译安装</h2><p>网上有大量OMNeT++的安装教程，在此不做赘述。具体可参照以下链接。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_37702021/article/details/121306656">https://blog.csdn.net/weixin_37702021/article/details/121306656</a><br><a target="_blank" rel="noopener" href="https://doc.omnetpp.org/omnetpp/InstallGuide.pdf">https://doc.omnetpp.org/omnetpp/InstallGuide.pdf</a></p>
</blockquote>
<h2 id="2-3-常见问题"><a href="#2-3-常见问题" class="headerlink" title="2.3 常见问题"></a>2.3 常见问题</h2><ul>
<li><strong><font color=red>安装过程中不要使用root用户</font></strong></li>
<li>配置过程中需要下载大量国外资源，建议配置apt代理和git代理，具体可参考<a href="https://deepsea52418.github.io/How-to-Use-VPN/">此文章</a></li>
</ul>
<h1 id="三、仿真模型分析"><a href="#三、仿真模型分析" class="headerlink" title="三、仿真模型分析"></a>三、仿真模型分析</h1><p>在本章节，我们将根据ned文件描述，分析 NeSTiNg 中引入的TSN终端和TSN交换机模型具体功能及结构。</p>
<h2 id="3-1-TSN交换机"><a href="#3-1-TSN交换机" class="headerlink" title="3.1 TSN交换机"></a>3.1 TSN交换机</h2><h3 id="3-1-1-交换机缓冲架构"><a href="#3-1-1-交换机缓冲架构" class="headerlink" title="3.1.1 交换机缓冲架构"></a>3.1.1 交换机缓冲架构</h3><p>一台交换机具有多个输入输出端口，交换机内部通过交换矩阵将端口连接起来。交换机内有一块资源存储缓冲区，用于存储待转发的数据包。根据缓冲区位置的不同，可以分为以下<a target="_blank" rel="noopener" href="https://www.sdnlab.com/author/15680/">四种架构</a>：<br>(a) 输出端口缓冲架构：将缓冲区置于出端口位置。其相比于输入端口缓冲具有更好的吞吐性。但每个输出端口需要 N 倍于线路带宽的处理能力来处理来自 N 个输入端口的帧，对处理芯片性能要求高。<br>(b) 输入端口缓冲+虚拟输出队列（VOQs）架构：可以满足处理速度，但吞吐量低，是目前最常用的架构。<br>(c) 交叉点缓冲架构：吞吐量大，但是对于具有N个端口的交换机需要O(N*N)的缓存空间。所需空间大，空间利用率低。<br>(c) 交换-内存-交换 (SMS) 架构：每个输入和输出端口共享中间的所有缓冲区，空间利用率高。</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211181451219.png" alt="image-20221118145125137" style="zoom:50%;" />

<center>图1 交换机缓冲架构</center>   
### 3.1.2 NeSTiNg交换机架构

<p>在 NeSTiNg 中提供了一个支持帧抢占的TSN交换机<code>VlanEtherSwitchPreemptable</code>，其采用<strong>输出端口缓冲</strong>的架构，流量在交换机中完成交换后，在对应输出端口中进行排队。如图2所示为TSN交换机的上半部分，主要负责对来自lowerLayer的流量进行转发，并将其传输至输出端口队列进行排队。</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211181452314.png" alt="image-20221118145201262" style="zoom:50%;" />

<center>图2 交换机上半部分内部结构</center>

<p>其上半部分涉及到的模块功能如下：</p>
<table>
<thead>
<tr>
<th align="left">模块</th>
<th align="left">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="left">interface Table</td>
<td align="left">负责将新接入交换机设备的mac地址和对应端口绑定</td>
</tr>
<tr>
<td align="left">Filtering Database</td>
<td align="left">过滤数据库负责存储数据包的过滤和转发规则，用于中继模块</td>
</tr>
<tr>
<td align="left">clock</td>
<td align="left">交换机时钟，负责时间同步</td>
</tr>
<tr>
<td align="left">scheduleSwap</td>
<td align="left">调度交换模块</td>
</tr>
<tr>
<td align="left">ProcessingDelay</td>
<td align="left">延迟模块，负责仿真流量在交换机内部寻找路由等所消耗时间</td>
</tr>
<tr>
<td align="left">relayUnit</td>
<td align="left">中继模块，负责仿真流量在交换机内部寻找目的端口</td>
</tr>
<tr>
<td align="left">queuing</td>
<td align="left">输出端口队列，存储转发至该端口待传输的数据包</td>
</tr>
<tr>
<td align="left">lowerLayer</td>
<td align="left">下层接口，负责将流量传入物理层传输</td>
</tr>
</tbody></table>
<p>如图3所示为TSN交换机的下半部分，主要负责对来自MAC层的流量进行处理。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182114917.png" alt="image-20220401172420972"></p>
<center>图3 交换机下半部分内部结构</center>

<p>如图4所示为TSN交换机网卡中结构，流量从MAC层进入后，经由VLAN Tag处理和出入规则调节器（ ingressTC , egressTC )后，进入TSN交换机。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182113137.png" alt="image-20220401172518711"></p>
<center>图4 网卡内部结构</center>

<p>如图5所示为输出端口队列（即图2中queuing）内部结构，由以下模块组成：</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182126073.png" alt="image-20221118212624983" style="zoom:50%;" />

<center>图5 输出队列内部结构</center>  


<table>
<thead>
<tr>
<th>模块</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>gateController</td>
<td>负责控制GCL，控制门（tGates）的开关</td>
</tr>
<tr>
<td>queuingFrames</td>
<td>负责根据数据帧Vlan Tag中的PCP值将其映射到不同队列中</td>
</tr>
<tr>
<td>queues</td>
<td>负责存储待转发的数据帧</td>
</tr>
<tr>
<td>tsAlgorithms</td>
<td>时间整形算法，根据一定的规则在队列中选择下一个待传输的数据帧。常见的算法有CBS等。</td>
</tr>
<tr>
<td>tGates</td>
<td>门控，当门打开时该队列流量可以传输</td>
</tr>
<tr>
<td>transmissionSelection</td>
<td>传输选择，当同一时间端口中有多个队列的流量都可传输时，选择优先传输的流量</td>
</tr>
</tbody></table>
<p>在此，我们利用一个流量从交换机入端口（ingress）到出端口（egress）的流程来演示流量在交换机内部的操作。（条件设定：流量vlan pcp&#x3D;7；当前时间&#x3D;0s；processingDelay&#x3D;5us；tsAlgorithms&#x3D;FIFO；交换机内部端口队列中无存储流量，无正在传输流量；GCL&#x3D;01111111 100us 10000000 100us；流量从0号端口入，1号端口出）</p>
<p>在端设备连接到交换机上时，interface Table在交换机内部将端口号与mac地址绑定。filtering Database存储数据包过滤与转发的规则。流量从0号端口进入交换机时，filtering Database决定是否接收该数据包，数据包从物理层经由lowerLayer[0]进入交换机，relayUnit根据流量目的地址，将其转发至1号端口。整个过程耗时5us。流量进入1号端口queuingFrames，其根据流量PCP值，将其映射至queues[7]等待传输。tsAlgorithms配置为FIFO模式，因此该流量在queues[7]中不在重新排队。此时时间为5us，tGates[7]&#x3D;0，关门，7号队列流量无法传输。当时间到达100us时，tGates[7]&#x3D;1，开门。流量进入transmissionSelection中，由于只有7号队列的流量，所以直接进入lowerLayer[1]，传输至物理层。</p>
<h2 id="3-2-TSN终端"><a href="#3-2-TSN终端" class="headerlink" title="3.2 TSN终端"></a>3.2 TSN终端</h2><h3 id="3-2-1-VlanEtherHostSched"><a href="#3-2-1-VlanEtherHostSched" class="headerlink" title="3.2.1 VlanEtherHostSched"></a>3.2.1 VlanEtherHostSched</h3><p>该模块实现了可根据给定时间表发送带有VLAN Tag数据的简单主机，一般充当实时性通信的双方。其具体结构如下图所示：</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182129920.png" alt="image-20221118212907797" style="zoom: 25%;" />

<center>图6 VlanEtherHostSched模型</center>

<h3 id="3-2-2-VlanEtherHostQ"><a href="#3-2-2-VlanEtherHostQ" class="headerlink" title="3.2.2 VlanEtherHostQ"></a>3.2.2 VlanEtherHostQ</h3><p>该模块实现了可以发送带有VLAN Tag数据的简单主机，一般充当非实时性通信的双方。其具体结构如下图所示：</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182136212.png" alt="image-20220401173004381" style="zoom:150%;" />

<center>图7 VlanEtherHostQ模型</center>

<p><strong>注意：VlanEtherHostQ、VlanEtherHostSched中以太网网卡模型与VlanEtherSwitchPreemptable中以太网网卡结构不同，此处暂不做分析。</strong></p>
<h1 id="四、仿真实验"><a href="#四、仿真实验" class="headerlink" title="四、仿真实验"></a>四、仿真实验</h1><p>在本章节，将结合 <a target="_blank" rel="noopener" href="https://www2.informatik.uni-stuttgart.de/bibliothek/ftp/ncstrl.ustuttgart_fi/INPROC-2019-04/INPROC-2019-04.pdf">NeSTiNg论文</a> 与源代码，分析其具体实现方式，并复现论文实验结果。NeSTiNg官方提供的3个例程模拟TSN网络。例程位于【 Nesting &#x2F; simulation &#x2F; examples】目录下，分别为：</p>
<ul>
<li>01_example_strict_priority：严格优先级</li>
<li>02_example_gating：门控</li>
<li>03_example_frame_preemption：帧抢占</li>
</ul>
<h2 id="4-1-ned文件详解"><a href="#4-1-ned文件详解" class="headerlink" title="4.1 ned文件详解"></a>4.1 ned文件详解</h2><p>在ned文件中，指出链路传播延迟&#x3D;0.1us，链路带宽1Gbps。交换机采用VlanEtherSwitchPreemptable模型，robotController采用VlanEtherHostSched模型，其余终端采用VlanEtherHostQ模型。</p>
<p>3个例程采用同一个ned文件（TestScenario.ned）描述的网络拓扑。网络拓扑如下图所示，其中workstation1与workstation2向backupServer发送数据包，robotCotroller向roboticArm发生数据包。</p>
<img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182137478.png" alt="image-20221118213756420" style="zoom:50%;" />

  <center>图8 网络拓扑</center>   

<table>
<thead>
<tr>
<th align="center">源</th>
<th align="center">目的</th>
<th align="center">优先级</th>
<th align="center">发送间隔</th>
<th align="center">帧大小</th>
<th align="center">帧传输时间</th>
</tr>
</thead>
<tbody><tr>
<td align="center">RobotController</td>
<td align="center">RoboticArm</td>
<td align="center">7</td>
<td align="center">400us</td>
<td align="center">354B</td>
<td align="center">2.832us</td>
</tr>
<tr>
<td align="center">workStation1</td>
<td align="center">BackupServer</td>
<td align="center">6</td>
<td align="center">12us</td>
<td align="center">1500B</td>
<td align="center">12us</td>
</tr>
<tr>
<td align="center">workStation2</td>
<td align="center">BackupServer</td>
<td align="center">5</td>
<td align="center">12us</td>
<td align="center">1500B</td>
<td align="center">12us</td>
</tr>
</tbody></table>
<h2 id="4-2-严格优先级"><a href="#4-2-严格优先级" class="headerlink" title="4.2 严格优先级"></a>4.2 严格优先级</h2><h3 id="4-2-1-example-strict-priority-ini文件"><a href="#4-2-1-example-strict-priority-ini文件" class="headerlink" title="4.2.1 example_strict_priority.ini文件"></a>4.2.1 example_strict_priority.ini文件</h3><p>在本小节我们对01_example_strict_priority.ini文件内容进行全面的解析，对于另外两个ini文件我们仅描述其不同点。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[General]</span>  </span><br><span class="line"><span class="comment"># 指定使用的网络拓扑文件名</span></span><br><span class="line"><span class="attr">network</span> = TestScenario  </span><br><span class="line"><span class="attr">record-eventlog</span> = <span class="literal">true</span>  </span><br><span class="line"><span class="attr">debug-on-errors</span> = <span class="literal">true</span>  </span><br><span class="line"><span class="comment"># 仿真结果输出文件夹名</span></span><br><span class="line"><span class="attr">result-dir</span> = results_strict_priority  </span><br><span class="line"><span class="attr">sim-time-limit</span> = <span class="number">1</span>s   </span><br><span class="line">**.<span class="attr">displayAddresses</span> = <span class="literal">true</span>  </span><br><span class="line">**.<span class="attr">verbose</span> = <span class="literal">true</span> </span><br><span class="line"><span class="comment"># 配置终端设备MAC地址 </span></span><br><span class="line">**.<span class="attr">robotController.eth.address</span> = <span class="string">&quot;00-00-00-00-00-01&quot;</span>  </span><br><span class="line">**.<span class="attr">workstation1.eth.address</span> = <span class="string">&quot;00-00-00-00-00-02&quot;</span>  </span><br><span class="line">**.<span class="attr">workstation2.eth.address</span> = <span class="string">&quot;00-00-00-00-00-03&quot;</span>  </span><br><span class="line">**.<span class="attr">roboticArm.eth.address</span> = <span class="string">&quot;00-00-00-00-00-04&quot;</span>  </span><br><span class="line">**.<span class="attr">backupServer.eth.address</span> = <span class="string">&quot;00-00-00-00-00-05&quot;</span>  </span><br><span class="line"><span class="comment"># 交换机默认延迟是4us,在此处延迟设定为5us </span></span><br><span class="line">**.switch*.<span class="attr">processingDelay.delay</span> = <span class="number">5</span>us </span><br><span class="line"><span class="comment"># 配置交换机路由表</span></span><br><span class="line">**.<span class="attr">filteringDatabase.database</span> = xmldoc(<span class="string">&quot;xml/TestScenarioRouting.xml&quot;</span>, <span class="string">&quot;/filteringDatabases/&quot;</span>)  </span><br><span class="line"><span class="comment"># 配置交换机GCL和流量整形算法</span></span><br><span class="line"><span class="comment"># 注：本人认为只需要在交换机A的3号端口进行配置即可，没必要在交换机B的0号端口进行配置，因为数据包拥塞发生在A的3号端口到B的2号端口上</span></span><br><span class="line">**.switchA.eth<span class="section">[3]</span>.<span class="attr">queue.gateController.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_AllOpen.xml&quot;</span>, <span class="string">&quot;/schedules/switch[@name=&#x27;switchA&#x27;]/port[@id=&#x27;3&#x27;]/schedule&quot;</span>)  </span><br><span class="line">**.switchB.eth<span class="section">[0]</span>.<span class="attr">queue.gateController.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_AllOpen.xml&quot;</span>, <span class="string">&quot;/schedules/switch[@name=&#x27;switchB&#x27;]/port[@id=&#x27;0&#x27;]/schedule&quot;</span>)  </span><br><span class="line"><span class="comment"># 注：此处enableHoldAndRelease作用暂不了解，怀疑可能和配置网卡发送方式有关</span></span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.<span class="attr">queue.gateController.enableHoldAndRelease</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.<span class="attr">queue.numberOfQueues</span> = <span class="number">8</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[0]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[1]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[2]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[3]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[4]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[5]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[6]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.tsAlgorithms<span class="section">[7]</span>.<span class="attr">typename</span> = <span class="string">&quot;StrictPriority&quot;</span>  </span><br><span class="line"><span class="comment"># 注：此处expressQueue作用暂不了解</span></span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[0]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[1]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[2]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[3]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[4]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[5]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[6]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[7]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line"><span class="comment"># 设定交换机队列缓冲区大小,约29个MTU</span></span><br><span class="line">**.queues<span class="section">[*]</span>.<span class="attr">bufferCapacity</span> = <span class="number">363360</span>b  </span><br><span class="line"><span class="comment"># 设定交换机是否运行帧抢占  </span></span><br><span class="line">**.switchA.eth<span class="section">[3]</span>.<span class="attr">mac.enablePreemptingFrames</span> = <span class="literal">false</span>    </span><br><span class="line"><span class="comment"># 配置RobotController的GCL  </span></span><br><span class="line">**.<span class="attr">robotController.trafGenSchedApp.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_AllOpen.xml&quot;</span>)   </span><br><span class="line"><span class="comment"># 配置workstation的流量大小、优先级、发送间隔、VLAN Tag</span></span><br><span class="line">**.workstation*.<span class="attr">trafGenApp.destAddress</span> = <span class="string">&quot;00-00-00-00-00-05&quot;</span> </span><br><span class="line">**.workstation*.<span class="attr">trafGenApp.packetLength</span> = <span class="number">1500</span>Byte-<span class="number">4</span>Byte </span><br><span class="line">**.workstation*.<span class="attr">trafGenApp.sendInterval</span> = <span class="number">12</span>us  </span><br><span class="line">**.workstation*.<span class="attr">trafGenApp.vlanTagEnabled</span> = <span class="literal">true</span>  </span><br><span class="line">**.<span class="attr">workstation1.trafGenApp.pcp</span> = <span class="number">6</span>  </span><br><span class="line">**.<span class="attr">workstation2.trafGenApp.pcp</span> = <span class="number">5</span>  </span><br><span class="line"><span class="comment"># 配置RoboticArm为仅接收。numPacketsPerBurst = 0 表示不发送数据包，以下三个参数必须配置，否则无法运行 </span></span><br><span class="line">**.<span class="attr">roboticArm.trafGenApp.numPacketsPerBurst</span> = <span class="number">0</span>  </span><br><span class="line">**.<span class="attr">roboticArm.trafGenApp.sendInterval</span> = <span class="number">1</span>ms  </span><br><span class="line">**.<span class="attr">roboticArm.trafGenApp.packetLength</span> = <span class="number">100</span>B   </span><br><span class="line"><span class="comment"># 配置BackupServer为仅接收  </span></span><br><span class="line">**.<span class="attr">backupServer.trafGenApp.numPacketsPerBurst</span> = <span class="number">0</span>  </span><br><span class="line">**.<span class="attr">backupServer.trafGenApp.sendInterval</span> = <span class="number">1</span>ms  </span><br><span class="line">**.<span class="attr">backupServer.trafGenApp.packetLength</span> = <span class="number">100</span>B  </span><br></pre></td></tr></table></figure>

<h3 id="4-2-2-TestScenarioSchedule-AllOpen-xml文件"><a href="#4-2-2-TestScenarioSchedule-AllOpen-xml文件" class="headerlink" title="4.2.2 TestScenarioSchedule_AllOpen.xml文件"></a>4.2.2 TestScenarioSchedule_AllOpen.xml文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">schedules</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultcycle</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">defaultcycle</span>&gt;</span>   </span><br><span class="line"># 设定robotController发送周期为400us，流量大小354B，优先级7 </span><br><span class="line">    <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;robotController&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">cycle</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">cycle</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line"># 不知道这个start的设置是不是保护带？  </span><br><span class="line">            <span class="tag">&lt;<span class="name">start</span>&gt;</span>10us<span class="tag">&lt;/<span class="name">start</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">queue</span>&gt;</span>7<span class="tag">&lt;/<span class="name">queue</span>&gt;</span>    </span><br><span class="line">         		  <span class="tag">&lt;<span class="name">dest</span>&gt;</span>00:00:00:00:00:04<span class="tag">&lt;/<span class="name">dest</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">size</span>&gt;</span>354B<span class="tag">&lt;/<span class="name">size</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">flowId</span>&gt;</span>1<span class="tag">&lt;/<span class="name">flowId</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">host</span>&gt;</span>    </span><br><span class="line"># 设定交换机所有门一直打开</span><br><span class="line">    <span class="tag">&lt;<span class="name">switch</span> <span class="attr">name</span>=<span class="string">&quot;switchA&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">schedule</span> <span class="attr">cycleTime</span>=<span class="string">&quot;400us&quot;</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>11111111<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;/<span class="name">schedule</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">port</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">switch</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;<span class="name">switch</span> <span class="attr">name</span>=<span class="string">&quot;switchB&quot;</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;<span class="name">schedule</span> <span class="attr">cycleTime</span>=<span class="string">&quot;400us&quot;</span>&gt;</span>    </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>11111111<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>    </span><br><span class="line">              	 <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>    </span><br><span class="line">            <span class="tag">&lt;/<span class="name">schedule</span>&gt;</span>    </span><br><span class="line">        <span class="tag">&lt;/<span class="name">port</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">switch</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">schedules</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h3 id="4-2-3-StrictPriority算法"><a href="#4-2-3-StrictPriority算法" class="headerlink" title="4.2.3 StrictPriority算法"></a>4.2.3 StrictPriority算法</h3><p>暂未了解算法具体代码。大体意思是流量严格按照高优先级到低优先级的顺序发送，只要有高优先级流量存在，低优先级就需要等待高优先级发送完成后才可发送。</p>
<h3 id="4-2-4-实验结果"><a href="#4-2-4-实验结果" class="headerlink" title="4.2.4 实验结果"></a>4.2.4 实验结果</h3><p>通过观察RoboticArm端应用程序统计的端到端延迟（endToEndDelay:vector TestScenario.roboticArm.tranfGenApp），可以看到延迟范围是19.5us-31.8us，且呈现一定的周期性。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182140745.png" alt="image-20220401204800560"></p>
<center>图9 严格优先级 端到端延迟 单位：s</center>

<p>workStation1流量带宽为：0.987Gbps （TestScenario.workStation1.eth.mac bits&#x2F;sec sent &#x3D;986962179）</p>
<p>SwitchA.eth[3]流量带宽为：0.987Gbps(TestScenario.switchA.eth[3].mac bits&#x2F;sec sent &#x3D; 986655162)</p>
<p>robotController流量带宽为：0.0075Gbps (TestScenario.robotController.eth.mac bits&#x2F;sec sent &#x3D;7523725)</p>
<p>workStation2丢包率为：100% （TestScenario.switchA.eth[2].mac rx channel idle(%)&#x3D;100）</p>
<h3 id="4-2-5-小结"><a href="#4-2-5-小结" class="headerlink" title="4.2.5 小结"></a>4.2.5 小结</h3><p>在严格优先级中，初始时刻，网络中仅workStation1和workStation2的流量，由于workStation1流量优先级较高，优先发送。当到达10us时，RobotController发出一个优先级为7的流量，但此时交换机中正在由流量被发送，因此需要等待到12us时才可从交换机中发出，产生约2us的排队时延。RobotController发送完成后，workStation1继续传输，由于流量间隔为12us，且workStation2流量优先级较低，所以workStation2的流量在SwitchA处一直排队，无法传输。</p>
<p>RobotController传输的最好情况是其流量到达交换机时刚好上一个流量传输完；最坏情况是刚好上一个流量开始传输。最好情况与最坏情况相差12us。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182142528.jpg" alt="Strict Priority"></p>
<center>图10 StrictPriority时序图</center>

<h2 id="4-3-门控"><a href="#4-3-门控" class="headerlink" title="4.3 门控"></a>4.3 门控</h2><h3 id="4-3-1-example-gating-ini文件"><a href="#4-3-1-example-gating-ini文件" class="headerlink" title="4.3.1 example_gating.ini文件"></a>4.3.1 example_gating.ini文件</h3><p>02_example_gating.ini文件与01_example_strict_priority.ini文件相比主要不同点集中在以下三条配置。其指定RobotController和交换机都采用TestScenarioSchedule_GatingOn.xml文件描述的门控。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">**.switchA.eth<span class="section">[3]</span>.<span class="attr">queue.gateController.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_GatingOn.xml&quot;</span>, <span class="string">&quot;/schedules/switch[@name=&#x27;switchA&#x27;]/port[@id=&#x27;3&#x27;]/schedule&quot;</span>)  </span><br><span class="line">**.switchB.eth<span class="section">[0]</span>.<span class="attr">queue.gateController.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_GatingOn.xml&quot;</span>, <span class="string">&quot;/schedules/switch[@name=&#x27;switchB&#x27;]/port[@id=&#x27;0&#x27;]/schedule&quot;</span>)  </span><br><span class="line">**.<span class="attr">robotController.trafGenSchedApp.initialSchedule</span> = xmldoc(<span class="string">&quot;xml/TestScenarioSchedule_GatingOn.xml&quot;</span>) </span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-TestScenarioSchedule-GatingOn-xml文件"><a href="#4-3-2-TestScenarioSchedule-GatingOn-xml文件" class="headerlink" title="4.3.2 TestScenarioSchedule_GatingOn.xml文件"></a>4.3.2 TestScenarioSchedule_GatingOn.xml文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">schedules</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultcycle</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">defaultcycle</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">host</span> <span class="attr">name</span>=<span class="string">&quot;robotController&quot;</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">cycle</span>&gt;</span>400us<span class="tag">&lt;/<span class="name">cycle</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line">           <span class="tag">&lt;<span class="name">start</span>&gt;</span>10us<span class="tag">&lt;/<span class="name">start</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">queue</span>&gt;</span>7<span class="tag">&lt;/<span class="name">queue</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">dest</span>&gt;</span>00:00:00:00:00:04<span class="tag">&lt;/<span class="name">dest</span>&gt;</span>  </span><br><span class="line">           	<span class="tag">&lt;<span class="name">size</span>&gt;</span>354B<span class="tag">&lt;/<span class="name">size</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">flowId</span>&gt;</span>1<span class="tag">&lt;/<span class="name">flowId</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">host</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">switch</span> <span class="attr">name</span>=<span class="string">&quot;switchA&quot;</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span> <span class="attr">id</span>=<span class="string">&quot;3&quot;</span>&gt;</span>  </span><br><span class="line">           <span class="tag">&lt;<span class="name">schedule</span> <span class="attr">cycleTime</span>=<span class="string">&quot;400us&quot;</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line"># 指定一个周期=400us，其中前200us打开7号队列门，后200us打开0-6号队列门</span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>200us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>10000000<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>  </span><br><span class="line">             		<span class="tag">&lt;/<span class="name">entry</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>200us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>  </span><br><span class="line">                   	<span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>01111111<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;/<span class="name">schedule</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">port</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">switch</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">switch</span> <span class="attr">name</span>=<span class="string">&quot;switchB&quot;</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span> <span class="attr">id</span>=<span class="string">&quot;0&quot;</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">schedule</span> <span class="attr">cycleTime</span>=<span class="string">&quot;400us&quot;</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>200us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>10000000<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">length</span>&gt;</span>200us<span class="tag">&lt;/<span class="name">length</span>&gt;</span>  </span><br><span class="line">                    <span class="tag">&lt;<span class="name">bitvector</span>&gt;</span>01111111<span class="tag">&lt;/<span class="name">bitvector</span>&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;/<span class="name">entry</span>&gt;</span>  </span><br><span class="line">           <span class="tag">&lt;/<span class="name">schedule</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">port</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">switch</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">schedules</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h3 id="4-3-3-实验结果"><a href="#4-3-3-实验结果" class="headerlink" title="4.3.3 实验结果"></a>4.3.3 实验结果</h3><p>观察RoboticArm端应用程序统计的端到端延迟，可以看到延迟确定性极佳，稳定在19.5us</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182142850.png" alt="image-20220401204934774"></p>
<center>图11 门控 端到端延迟 单位：s</center>

<p>workStation1流量带宽为：0.987Gbps （TestScenario.workStation1.eth.mac bits&#x2F;sec sent &#x3D;986945179）</p>
<p>SwitchA.eth[3]流量带宽为：0.493Gbps(TestScenario.switchA.eth[3].mac bits&#x2F;sec sent &#x3D;492965016)</p>
<p>robotController流量带宽为：0.0075Gbps (TestScenario.robotController.eth.mac bits&#x2F;sec sent &#x3D;7523725)</p>
<p>workStation2丢包率为：100% （TestScenario.switchA.eth[2].mac rx channel idle(%)&#x3D;100）</p>
<p>时间问题：按照Nesting论文中，d<em>tot</em>&#x3D;3 *d<em>prop</em>+2*d<em>proc</em>+3*d<em>trans</em>&#x3D;19.516us。其中交换机处理延迟d<em>proc</em>&#x3D;5us，链路传输延迟d<em>trans</em>&#x3D;0.1us，传播延迟(传输一帧用时) d<em>prop</em>&#x3D;数据帧大小（应用层354B+802.3协议帧格式的30B&#x3D;384B）&#x2F; 1Gbps &#x3D; 3.072us</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182149000.png" alt="image-20220401222703667"></p>
<center>图12 IEEE802.3协议帧格式</center>

<h3 id="4-3-4-小结"><a href="#4-3-4-小结" class="headerlink" title="4.3.4 小结"></a>4.3.4 小结</h3><p>在有门控列表存在的情况下，0时刻WorkStation向交换机A发送数据包，其中WorkStation1的流量进入交换机A的3号端口6号队列，WorkStation2的流量进入5号队列。但此时5号队列和6号队列的门关闭，无法传输，流量缓存在队列中。当10us时，RobotController发送数据包，进入7号队列，此时7号队列的门打开，流量完成传输。当200us时，0-6号队列门打开，6号队列优先级高于5号队列，有先传输。由于开门周期内6号队列总是有流量，所以5号队列的流量无法完成传输。</p>
<p>在GCL存在的情况下，交换机专门将每个周期的前200us预留给RobotController发送流量，其流量不会产生排队延迟。但是由于GCL的存在，对于WorkStation1来说，网络带宽变成了StrictPriority带宽的一半。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182143302.jpg" alt="Gating"></p>
<center>图13 Gating示例时序图</center>

<h2 id="4-4-帧抢占"><a href="#4-4-帧抢占" class="headerlink" title="4.4 帧抢占"></a>4.4 帧抢占</h2><h3 id="4-4-1-example-frame-preemption-ini文件"><a href="#4-4-1-example-frame-preemption-ini文件" class="headerlink" title="4.4.1 example_frame_preemption.ini文件"></a>4.4.1 example_frame_preemption.ini文件</h3><p>此文件主要的区别在以下几条设定，主要是关于交换机队列是否是快速队列和交换机是否设置为可抢占。其余设定与example_strict_priority.ini文件相同。</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 暂时不知道这边设置的具体含义，可能和设置7号队列可抢占，0-6号队列不可抢占有关</span></span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[0]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[1]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[2]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[3]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[4]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[5]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[6]</span>.<span class="attr">expressQueue</span> = <span class="literal">false</span>  </span><br><span class="line">**.switch*.eth<span class="section">[*]</span>.queue.queues<span class="section">[7]</span>.<span class="attr">expressQueue</span> = <span class="literal">true</span>  </span><br><span class="line"><span class="comment"># 设定交换机A的3号端口为可抢占</span></span><br><span class="line">**.switchA.eth<span class="section">[3]</span>.<span class="attr">mac.enablePreemptingFrames</span> = <span class="literal">true</span>  </span><br></pre></td></tr></table></figure>

<h3 id="4-4-2-实验结果"><a href="#4-4-2-实验结果" class="headerlink" title="4.4.2 实验结果"></a>4.4.2 实验结果</h3><p>观察RoboticArm端应用程序统计的端到端延迟，可以看到延迟在19.5us附近有小幅度抖动。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182144880.png" alt="image-20220401205142569"></p>
<center>图14 帧抢占 端到端延迟 单位：s</center>

<p>workStation1流量带宽为：0.987Gbps （TestScenario.workStation1.eth.mac bits&#x2F;sec sent &#x3D;986945179）</p>
<p>SwitchA.eth[3]流量带宽为：1.01Gbps(TestScenario.switchA.eth[3].mac bits&#x2F;sec sent &#x3D; 1014668064) （注：流量带宽超过1Gbps原因未知）</p>
<p>robotController流量带宽为：0.0075Gbps (TestScenario.robotController.eth.mac bits&#x2F;sec sent &#x3D;7523725)</p>
<p>workStation2丢包率为：100% （TestScenario.switchA.eth[2].mac rx channel idle(%)&#x3D;100）</p>
<h3 id="4-4-3-小结"><a href="#4-4-3-小结" class="headerlink" title="4.4.3 小结"></a>4.4.3 小结</h3><p>在帧抢占模式中，起始情况与严格优先级情况相同。当到达10us时，RobotController发送的流量达到交换机A的3号端口，此时交换机正在传输WorkStation1的流量，但高优先级帧抢占，终断正在传输的流量。当高优先级流量传输完成后，低优先级流量继续传输。</p>
<p>对于帧抢占模式，高优先级流量可以抢占正在传输的低优先级流量，从而减少排队时延，与严格优先级相比，其确定性更佳。但由于交换机处理帧抢占也需要一定的时间，所以其确定性略差与门控模式。但其可以保证网络的充分利用。</p>
<p><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/NeSTiNg/202211182145614.jpg" alt="frame preemption"></p>
<center>图15 Frame Preemption示例时序图</center>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Deepsea52418</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://deepsea52418.github.io/TSN-Simulation-NeSTiNg/">https://deepsea52418.github.io/TSN-Simulation-NeSTiNg/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://deepsea52418.github.io" target="_blank">Deepsea52418</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/TSN/">TSN</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/Inet-4-4-TSN-Introduction/"><img class="prev-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Inet 4.4 TSN Introduction</div></div></a></div><div class="next-post pull-right"><a href="/How-to-Clone-Linux/"><img class="next-cover" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">How to Clone Linux</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/deepsea52418/Blog-image/main/Blog/202211152204715.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Deepsea52418</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">4</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a></div></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/deepsea52418" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/deepsea52418@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%AE%80%E4%BB%8B"><span class="toc-text">一、简介</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%90%AD%E5%BB%BA%E4%BB%BF%E7%9C%9F%E7%8E%AF%E5%A2%83"><span class="toc-text">二、搭建仿真环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E4%BB%BF%E7%9C%9F%E7%8E%AF%E5%A2%83"><span class="toc-text">2.1 仿真环境</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85"><span class="toc-text">2.2 编译安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-text">2.3 常见问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BB%BF%E7%9C%9F%E6%A8%A1%E5%9E%8B%E5%88%86%E6%9E%90"><span class="toc-text">三、仿真模型分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-TSN%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-text">3.1 TSN交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%BC%93%E5%86%B2%E6%9E%B6%E6%9E%84"><span class="toc-text">3.1.1 交换机缓冲架构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-TSN%E7%BB%88%E7%AB%AF"><span class="toc-text">3.2 TSN终端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-VlanEtherHostSched"><span class="toc-text">3.2.1 VlanEtherHostSched</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-VlanEtherHostQ"><span class="toc-text">3.2.2 VlanEtherHostQ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BB%BF%E7%9C%9F%E5%AE%9E%E9%AA%8C"><span class="toc-text">四、仿真实验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-ned%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="toc-text">4.1 ned文件详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E4%B8%A5%E6%A0%BC%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">4.2 严格优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-example-strict-priority-ini%E6%96%87%E4%BB%B6"><span class="toc-text">4.2.1 example_strict_priority.ini文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-TestScenarioSchedule-AllOpen-xml%E6%96%87%E4%BB%B6"><span class="toc-text">4.2.2 TestScenarioSchedule_AllOpen.xml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-3-StrictPriority%E7%AE%97%E6%B3%95"><span class="toc-text">4.2.3 StrictPriority算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-4-%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C"><span class="toc-text">4.2.4 实验结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-5-%E5%B0%8F%E7%BB%93"><span class="toc-text">4.2.5 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E9%97%A8%E6%8E%A7"><span class="toc-text">4.3 门控</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-example-gating-ini%E6%96%87%E4%BB%B6"><span class="toc-text">4.3.1 example_gating.ini文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-TestScenarioSchedule-GatingOn-xml%E6%96%87%E4%BB%B6"><span class="toc-text">4.3.2 TestScenarioSchedule_GatingOn.xml文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-3-%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C"><span class="toc-text">4.3.3 实验结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-4-%E5%B0%8F%E7%BB%93"><span class="toc-text">4.3.4 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-4-%E5%B8%A7%E6%8A%A2%E5%8D%A0"><span class="toc-text">4.4 帧抢占</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-1-example-frame-preemption-ini%E6%96%87%E4%BB%B6"><span class="toc-text">4.4.1 example_frame_preemption.ini文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-2-%E5%AE%9E%E9%AA%8C%E7%BB%93%E6%9E%9C"><span class="toc-text">4.4.2 实验结果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-3-%E5%B0%8F%E7%BB%93"><span class="toc-text">4.4.3 小结</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/How-to-Use-VPN/" title="How to Use VPN"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="How to Use VPN"/></a><div class="content"><a class="title" href="/How-to-Use-VPN/" title="How to Use VPN">How to Use VPN</a><time datetime="2022-11-15T03:49:56.000Z" title="发表于 2022-11-15 11:49:56">2022-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Inet-4-4-TSN-Introduction/" title="Inet 4.4 TSN Introduction"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Inet 4.4 TSN Introduction"/></a><div class="content"><a class="title" href="/Inet-4-4-TSN-Introduction/" title="Inet 4.4 TSN Introduction">Inet 4.4 TSN Introduction</a><time datetime="2022-11-13T07:47:36.000Z" title="发表于 2022-11-13 15:47:36">2022-11-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/TSN-Simulation-NeSTiNg/" title="TSN Simulation - NeSTiNg"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="TSN Simulation - NeSTiNg"/></a><div class="content"><a class="title" href="/TSN-Simulation-NeSTiNg/" title="TSN Simulation - NeSTiNg">TSN Simulation - NeSTiNg</a><time datetime="2022-11-11T16:00:00.000Z" title="发表于 2022-11-12 00:00:00">2022-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/How-to-Clone-Linux/" title="How to Clone Linux"><img src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="How to Clone Linux"/></a><div class="content"><a class="title" href="/How-to-Clone-Linux/" title="How to Clone Linux">How to Clone Linux</a><time datetime="2022-05-01T10:01:47.000Z" title="发表于 2022-05-01 18:01:47">2022-05-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Deepsea52418</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>